!function(){"use strict";var e,t,r,n,o,i,a={messageDataProperty:"msWinJSXYFocusControlMessage",register:"register",unregister:"unregister",dFocusEnter:"dFocusEnter",dFocusExit:"dFocusExit"},c={left:"left",right:"right",up:"up",down:"down"},u={focusChanging:"focuschanging",focusChanged:"focuschanged"},s=["A","BUTTON","IFRAME","INPUT","SELECT","TEXTAREA","X-MS-WEBVIEW"],f=[],l={primaryAxisDistanceWeight:30,secondaryAxisDistanceWeight:20,percentInHistoryShadowWeight:1e5},g={left:[],right:[],up:[],down:[],accept:[]},d=!0;function h(e,t){var r=v(e,t);return r?r.target:null}function p(e){var t="_on"+e+"state";return{get:function(){var e=this[t];return e&&e.userHandler},set:function(r){var n=this[t];r?(n||(n={wrapper:function(e){return n.userHandler(e)},userHandler:r},Object.defineProperty(this,t,{value:n,enumerable:!1,writable:!0,configurable:!0}),this.addEventListener(e,n.wrapper,!1)),n.userHandler=r):n&&(this.removeEventListener(e,n.wrapper,!1),this[t]=null)},enumerable:!0}}function m(s,f,l,g){if(l||document.activeElement!==t)n=null,t=null,r=null;else if(t&&r){var d=b(t.getBoundingClientRect());(d.left!==r.left||Math.abs(d.top-r.top)>1)&&(r=d)}var h=document.activeElement,p=v(s,{focusRoot:e,historyRect:n,referenceElement:t,referenceRect:l});if(p&&w(p.target,f)){if(function(e,t){var r={top:-1,bottom:-1,right:-1,left:-1,height:0,width:0};e===c.left||e===c.right?(r.top=Math.max(t.targetRect.top,t.referenceRect.top,n?n.top:Number.MIN_VALUE),r.bottom=Math.min(t.targetRect.bottom,t.referenceRect.bottom,n?n.bottom:Number.MAX_VALUE),r.bottom<=r.top&&(r.top=t.targetRect.top,r.bottom=t.targetRect.bottom),r.height=r.bottom-r.top,r.width=Number.MAX_VALUE,r.left=Number.MIN_VALUE,r.right=Number.MAX_VALUE):(r.left=Math.max(t.targetRect.left,t.referenceRect.left,n?n.left:Number.MIN_VALUE),r.right=Math.min(t.targetRect.right,t.referenceRect.right,n?n.right:Number.MAX_VALUE),r.right<=r.left&&(r.left=t.targetRect.left,r.right=t.targetRect.right),r.width=r.right-r.left,r.height=Number.MAX_VALUE,r.top=Number.MIN_VALUE,r.bottom=Number.MAX_VALUE);n=r}(s,p),t=p.target,r=p.targetRect,"IFRAME"===p.target.tagName){var m=p.target;if(i.isXYFocusEnabled(m)){var E=b({left:p.referenceRect.left-p.targetRect.left,top:p.referenceRect.top-p.targetRect.top,width:p.referenceRect.width,height:p.referenceRect.height});(R={})[a.messageDataProperty]={type:a.dFocusEnter,direction:s,referenceRect:E},m.contentWindow.postMessage(R,"*")}}else"function"==typeof p.target.navigateFocus&&p.target.navigateFocus(s,o.refRectToNavigateFocusRect(p.referenceRect));return I.dispatchEvent(u.focusChanged,{previousFocusElement:h,keyCode:f}),!0}if(!g&&top!==window||"function"==typeof window.departFocus){var R;if((E=l)||(E=document.activeElement?b(document.activeElement.getBoundingClientRect()):{top:-1,bottom:-1,right:-1,left:-1,height:0,width:0}),top===window&&"function"==typeof window.departFocus)document.activeElement.blur(),departFocus(s,o.refRectToNavigateFocusRect(E));else(R={})[a.messageDataProperty]={type:a.dFocusExit,direction:s,referenceRect:E},parent.postMessage(R,"*");return!0}return!1}function v(t,r){(r=r||{}).focusRoot=r.focusRoot||e||document.body,r.historyRect=r.historyRect||{top:-1,bottom:-1,right:-1,left:-1,height:0,width:0};var n=Math.max(window.screen.availHeight,window.screen.availWidth),o=function(e,t){var r,n;(!e&&!t||e&&!e.parentNode)&&document.activeElement!==document.body&&(e=document.activeElement);n=e?b((r=e).getBoundingClientRect()):t?b(t):{top:-1,bottom:-1,right:-1,left:-1,height:0,width:0};return{element:r,rect:n}}(r.referenceElement,r.referenceRect),i=o.element;if(i){var a=i.getAttribute("data-tv-focus-"+t);if(a&&a){for(var u,s=o.element;!u&&s;)u=s.querySelector(a),s=s.parentElement;if(u)return u===document.activeElement?null:{target:u,targetRect:b(u.getBoundingClientRect()),referenceRect:o.rect,usedOverride:!0}}}for(var f={element:null,rect:null,score:0},g=r.focusRoot.querySelectorAll("*"),d=0,h=g.length;d<h;d++){var p=g[d];if(o.element!==p&&E(p)){var m=b(p.getBoundingClientRect());if(0!==m.width&&0!==m.height){var v=R(t,n,r.historyRect,o.rect,m);v>f.score&&(f.element=p,f.rect=m,f.score=v)}}}return f.element?{target:f.element,targetRect:f.rect,referenceRect:o.rect,usedOverride:!1}:null;function w(e,t,r,n){if(e>=n||t<=r)return 0;var o=Math.min(t,n)-Math.max(e,r),i=Math.min(n-r,t-e);return 0===i?0:o/i}function R(e,t,r,n,o){var i,a,u=0,s=0,f=0;switch(e){case c.left:if(o.left>=n.left)break;i=w(n.top,n.bottom,o.top,o.bottom),a=n.left-o.right,i>0?f=w(r.top,r.bottom,o.top,o.bottom):s=n.bottom<=o.top?o.top-n.bottom:n.top-o.bottom;break;case c.right:if(o.right<=n.right)break;i=w(n.top,n.bottom,o.top,o.bottom),a=o.left-n.right,i>0?f=w(r.top,r.bottom,o.top,o.bottom):s=n.bottom<=o.top?o.top-n.bottom:n.top-o.bottom;break;case c.up:if(o.top>=n.top)break;i=w(n.left,n.right,o.left,o.right),a=n.top-o.bottom,i>0?f=w(r.left,r.right,o.left,o.right):s=n.right<=o.left?o.left-n.right:n.left-o.right;break;case c.down:if(o.bottom<=n.bottom)break;i=w(n.left,n.right,o.left,o.right),a=o.top-n.bottom,i>0?f=w(r.left,r.right,o.left,o.right):s=n.right<=o.left?o.left-n.right:n.left-o.right}return a>=0&&(s=t-s,(a=t-a)>=0&&s>=0&&(u=(a+=a*i)*l.primaryAxisDistanceWeight+s*l.secondaryAxisDistanceWeight+f*l.percentInHistoryShadowWeight)),u}}function b(e){return{top:Math.floor(e.top),bottom:Math.floor(e.top+e.height),right:Math.floor(e.left+e.width),left:Math.floor(e.left),height:Math.floor(e.height),width:Math.floor(e.width)}}function w(e,t){return I.dispatchEvent(u.focusChanging,{nextFocusElement:e,keyCode:t})||e.focus(),document.activeElement===e}function E(e){var t,r,n=e.tagName,o=parseInt(e.getAttribute("tabIndex"));if(-1===s.indexOf(n)&&isNaN(o)){for(var a=!1,c=0,u=f.length;c<u;c++)if(t=e,r=f[c],void 0,(t.matches||t.msMatchesSelector||t.mozMatchesSelector||t.webkitMatchesSelector).call(t,r)){isNaN(o)&&e.setAttribute("tabIndex",0),a=!0;break}if(!a)return!1}if("IFRAME"===n&&!i.isXYFocusEnabled(e))return!1;if("DIV"===n&&e.winControl&&e.winControl.disabled)return!1;var l=window.getComputedStyle(e);return!(l&&-1===o||"none"===l.display||"hidden"===l.visibility||e.disabled)}function R(e){if(!e.defaultPrevented){var t="",r=e.keyCode;if(-1!==g.up.indexOf(r)?t="up":-1!==g.down.indexOf(r)?t="down":-1!==g.left.indexOf(r)?t="left":-1!==g.right.indexOf(r)&&(t="right"),t&&d)m(t,r)&&e.preventDefault()}}function y(e){e.defaultPrevented||-1!==g.accept.indexOf(e.keyCode)&&e.srcElement.click()}!function(e){e.refRectToNavigateFocusRect=function(e){return{originLeft:e.left,originTop:e.top,originWidth:e.width,originHeight:e.height}},e.navigateFocusRectToRefRect=function(e){return b({left:e.originLeft,top:e.originTop,width:e.originWidth,height:e.originHeight})}}(o||(o={})),function(e){var t=[];function r(e){for(var r=t.length-1;r>=0;r--)try{var n=t[r];n.contentWindow?e(n,r):t.splice(r,1)}catch(e){t.splice(r,1)}}e.count=function(){return r(function(){return!1}),t.length},e.getIFrameFromWindow=function(e){var t=document.querySelectorAll("IFRAME"),r=Array.prototype.filter.call(t,function(t){return t.contentWindow===e});return r.length?r[0]:null},e.isXYFocusEnabled=function(e){var t=!1;return r(function(r){r===e&&(t=!0)}),t},e.registerIFrame=function(e){t.push(e)},e.unregisterIFrame=function(e){var n=-1;r(function(t,r){t===e&&(n=r)}),-1!==n&&t.splice(n,1)}}(i||(i={})),g.left.push(37,214,205,140),g.right.push(39,213,206,141),g.up.push(38,211,203,138),g.down.push(40,212,204,139),g.accept.push(142,195),window.addEventListener("message",function(e){var t=null;try{if(!(t=e.source))return}catch(e){return}if(e.data&&e.data[a.messageDataProperty]){var r=e.data[a.messageDataProperty];switch(r.type){case a.register:(n=i.getIFrameFromWindow(t))&&i.registerIFrame(n);break;case a.unregister:(n=i.getIFrameFromWindow(t))&&i.unregisterIFrame(n);break;case a.dFocusEnter:m(r.direction,-1,r.referenceRect,!0)||(E(document.body)?document.body.focus():m(r.direction,-1));break;case a.dFocusExit:var n=i.getIFrameFromWindow(t);if(document.activeElement!==n)break;var o=r.referenceRect,c=n.getBoundingClientRect();o.left+=c.left,o.top+=c.top,"number"==typeof o.right&&(o.right+=c.left),"number"==typeof o.bottom&&(o.bottom+=c.top),m(r.direction,-1,o)}}}),document.addEventListener("departingfocus",function(e){m(e.navigationReason,-1,o.navigateFocusRectToRefRect(e))&&e&&"function"==typeof e.focus&&e.focus()}),window.addEventListener("navigatingfocus",function(e){m(e.navigationReason,-1,o.navigateFocusRectToRefRect(e))&&e&&"function"==typeof e.focus&&e.focus()});var F=!1,M=function(){if(!F&&(F=!0,document.addEventListener("keydown",R),document.addEventListener("keyup",y),window.top!==window.window)){var e={};e[a.messageDataProperty]={type:a.register,version:1},window.parent.postMessage(e,"*")}};document.addEventListener("DOMContentLoaded",function(){M()});var A,C=function(){function e(e,t,r){this.detail=t,this.target=r,this.timeStamp=Date.now(),this.type=e,this.bubbles={value:!1,writable:!1},this.cancelable={value:!1,writable:!1},this.trusted={value:!1,writable:!1},this.eventPhase={value:0,writable:!1},this.supportedForProcessing=!0}return Object.defineProperty(e.prototype,"currentTarget",{get:function(){return this.target},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"defaultPrevented",{get:function(){return this._preventDefaultCalled},enumerable:!0,configurable:!0}),e.prototype.preventDefault=function(){this._preventDefaultCalled=!0},e.prototype.stopImmediatePropagation=function(){this._stopImmediatePropagationCalled=!0},e.prototype.stopPropagation=function(){},e}(),N={_listeners:null,addEventListener:function(e,t,r){r=r||!1,this._listeners=this._listeners||{};for(var n=this._listeners[e]=this._listeners[e]||[],o=0,i=n.length;o<i;o++){var a=n[o];if(a.useCapture===r&&a.listener===t)return}n.push({listener:t,useCapture:r})},dispatchEvent:function(e,t){var r=this._listeners&&this._listeners[e];if(r){for(var n=new C(e,t,this),o=0,i=(r=r.slice(0,r.length)).length;o<i&&!n._stopImmediatePropagationCalled;o++)r[o].listener(n);return n.defaultPrevented||!1}return!1},removeEventListener:function(e,t,r){r=r||!1;var n=this._listeners&&this._listeners[e];if(n)for(var o=0,i=n.length;o<i;o++){var a=n[o];if(a.listener===t&&a.useCapture===r){n.splice(o,1),0===n.length&&delete this._listeners[e];break}}}},_={init:M,findNextFocusElement:h,keyCodeMap:g,focusableSelectors:f,moveFocus:function(e,t){var r=h(e,t);if(r){var n=document.activeElement;if(w(r,-1))return I.dispatchEvent(u.focusChanged,{previousFocusElement:n,keyCode:-1}),r}return null},onfocuschanged:p(u.focusChanged),onfocuschanging:p(u.focusChanging),_xyFocus:m,_handleKeyDownEvent:R,_handleKeyUpEvent:y,_iframeHelper:i};A={},[_,N].forEach(function(e){Object.keys(e).forEach(function(t){A[t]=e[t]})}),(_=A)._listeners={};var I=_;window.TVJS=window.TVJS||{},TVJS.DirectionalNavigation=_,Object.defineProperty(window.TVJS.DirectionalNavigation,"enabled",{get:function(){return d},set:function(e){d=e},enumerable:!0,configurable:!0}),Object.defineProperty(window.TVJS.DirectionalNavigation,"focusRoot",{get:function(){return e},set:function(t){e=t},enumerable:!0,configurable:!0}),window.navigator&&"string"==typeof window.navigator.gamepadInputEmulation&&(window.navigator.gamepadInputEmulation="keyboard")}();
